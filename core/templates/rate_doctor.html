{% extends 'base.html' %}
{% block content %}

<div class="container mt-5">
    <div class="col-md-6 mx-auto">

        <div class="card shadow p-4">
            <h3 class="text-center mb-3">
                Rate Dr. {{ doctor.get_full_name|default:doctor.username }}
            </h3>

            <form method="POST">
                {% csrf_token %}

                <!-- Star Selection -->
                <label class="form-label"><strong>Select Rating (1–5)</strong></label>
                <select name="stars" class="form-select mb-3" required>
                    <option value="5" selected>⭐⭐⭐⭐⭐ (5)</option>
                    <option value="4">⭐⭐⭐⭐ (4)</option>
                    <option value="3">⭐⭐⭐ (3)</option>
                    <option value="2">⭐⭐ (2)</option>
                    <option value="1">⭐ (1)</option>
                </select>

                <!-- Existing review -->
                {% if existing %}
                    <p class="text-muted small">
                        You already rated this doctor. Updating will overwrite your previous review.
                    </p>
                {% endif %}

                <!-- Review Box -->
                <label class="form-label"><strong>Your Review (optional)</strong></label>
                <textarea name="review" class="form-control" rows="3"
                          placeholder="Write something...">{{ existing.review }}</textarea>

                <!-- Submit Button -->
                <button class="btn btn-primary mt-3 w-100">
                    Submit Rating
                </button>
            </form>
        </div>

    </div>
</div>

{% endblock %}
